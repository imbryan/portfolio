# PRODUCTION OVERRIDE for docker-compose.yml
services:
  portfolio:
    build:
      dockerfile: Dockerfile.prod
    command: >
      sh -c "
      python manage.py migrate &&
      python manage.py collectstatic --noinput &&
      gunicorn portfolio.wsgi:application --bind 0.0.0.0:8000"
    # No ports when on docker net
    ports: []
    restart: unless-stopped
    networks:
      - portfolio

networks:
  portfolio:
    external: true
